{"version":3,"names":["ViewabilityTracker","constructor","renderAheadOffset","initialOffset","columnsPerPage","extraScrollData","_currentOffset","Math","max","_maxOffset","_actualOffset","_renderAheadOffset","_visibleWindow","start","end","_engagedWindow","_windowBound","_layout","x","y","width","height","_itemCount","_columnsPerPage","_extraScrollData","_visibleIndexes","_engagedIndexes","onVisibleRowsChanged","onEngagedRowsChanged","onVisibleColumnChanged","init","_doInitialFit","setLayout","layout","maxOffset","itemCount","setDimensions","dimension","forceRefresh","shouldForceScroll","forceRefreshWithOffset","offset","updateOffset","isActual","correctedOffset","min","_updateTrackingWindows","startIndex","length","_fitAndUpdate","getLastOffset","getLastActualOffset","getEngagedIndexes","updateRenderAheadOffset","getCurrentRenderAheadOffset","setActualOffset","actualOffset","_getLayoutByIndex","index","newVisibleItems","newEngagedItems","_fitIndexes","_diffUpdateOriginalIndexesAndRaiseEvents","firstVisibleIndex","floor","newVisibleIndexes","newEngagedIndexes","isReverse","count","relevantDim","i","atLeastOneLocated","_checkIntersectionAndReport","insertOnTop","itemRect","isFound","_setRelevantBounds","_itemIntersectsVisibleWindow","splice","push","_itemIntersectsEngagedWindow","_isItemInBounds","window","itemBound","_isItemBoundsBeyondWindow","startBound","endBound","_isZeroHeightEdgeElement","_itemIntersectsWindow","startOffset","endOffset","_updateAndNotify","_this$_startColumn","_this$_startColumn2","columnWidth","round","column","_startColumn","columns","newItems","oldItems","callback","now","notNow","_calculateArrayDiff","arr1","arr2","set1","Set","set2","filter","item","has","exports","default"],"sourceRoot":"../../../../../src","sources":["service/recyclerlistview/core/ViewabilityTracker.ts"],"mappings":"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","ignoreList":[]}